{% extends "base.html" %}
{% block content %}

<div class="row justify-content-center align-items-center" style="height: 60vh;">
  <div class="col-md-4">
    <div class="card card-dark p-4 text-center border-primary border-opacity-50 shadow-lg">
      <div class="mb-4">
        <span class="display-6">ğŸ”’</span>
      </div>

      {# ì œëª© #}
      <h3 class="h5 fw-bold mb-3 text-white">
        {% if mode == 'admin' %}
          ê´€ë¦¬ì ë¡œê·¸ì¸
        {% elif mode == 'register' %}
          íšŒì›ê°€ì…
        {% else %}
          ë¡œê·¸ì¸
        {% endif %}
      </h3>

      <p class="text-secondary small mb-4">
        {% if mode == 'admin' %}
          í¬íŠ¸í´ë¦¬ì˜¤ ê´€ë¦¬ìë§Œ ì ‘ì† ê°€ëŠ¥í•©ë‹ˆë‹¤.
        {% elif mode == 'register' %}
          ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ ê³„ì •ì„ ìƒì„±í•˜ì„¸ìš”.
        {% else %}
          ë“±ë¡ëœ ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¡œ ë¡œê·¸ì¸í•˜ì„¸ìš”.
        {% endif %}
      </p>

      {# ì—ëŸ¬ ë©”ì‹œì§€ #}
      {% if error %}
        <div class="alert alert-danger py-2 small bg-danger bg-opacity-10 text-danger border-danger border-opacity-25">
          {{ error }}
        </div>
      {% endif %}

      {# í”Œë˜ì‹œ ë©”ì‹œì§€ #}
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for category, message in messages %}
            <div class="alert alert-{{ category }} py-2 small">{{ message }}</div>
          {% endfor %}
        {% endif %}
      {% endwith %}

      {# ===== ì†Œì…œ ë¡œê·¸ì¸ (ê´€ë¦¬ì ëª¨ë“œì—ì„œëŠ” ìˆ¨ê¹€) ===== #}
      {% if mode != 'admin' %}
        <div class="mt-4 d-flex flex-column gap-2">

          <!-- ì¹´ì¹´ì˜¤ -->
<!-- ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ë²„íŠ¼ -->
<!-- ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ -->
<a href="{{ url_for('kakao_login') }}" style="display:block; width:100%; max-width:320px; margin:0 auto;">
    <img src="{{ url_for('static', filename='img/kakao_icon.png') }}"
         alt="ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸"
         style="width:100%; display:block;">
</a>

    
    ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ê³„ì†í•˜ê¸°
</a>


          <!-- ë„¤ì´ë²„ -->
          <a href="{{ url_for('naver_login') }}"
             style="
                  display:block;
                  width:100%;
                  background:#03C75A;
                  color:#ffffff;
                  font-weight:700;
                  padding:14px 0;
                  border-radius:12px;
                  text-align:center;
                  font-size:16px;">
              <span style="font-size:20px; margin-right:8px;">N</span>
              ë„¤ì´ë²„ë¡œ ê³„ì†í•˜ê¸°
          </a>

          <!-- êµ¬ê¸€ -->
          <a href="{{ url_for('google_login') }}"
             style="
                  display:block;
                  width:100%;
                  background:#ffffff;
                  color:#000000;
                  font-weight:600;
                  padding:14px 0;
                  border-radius:12px;
                  border:1px solid #ddd;
                  text-align:center;
                  font-size:16px;">
              <img src="https://www.google.com/favicon.ico"
                   width="20" style="vertical-align:middle; margin-right:8px;">
              êµ¬ê¸€ë¡œ ê³„ì†í•˜ê¸°
          </a>
        </div>

        <div class="text-center text-secondary small my-3">
          ë˜ëŠ” ì´ë©”ì¼ë¡œ ê³„ì†í•˜ê¸°
        </div>
      {% endif %}

      {# ===== ì´ë©”ì¼ / ë¹„ë°€ë²ˆí˜¸ í¼ ===== #}
      <form method="post"
            action="
              {% if mode == 'admin' %}
                {{ url_for('admin_login') }}
              {% elif mode == 'register' %}
                {{ url_for('register') }}
              {% else %}
                {{ url_for('login') }}
              {% endif %}
            ">

        {% if mode != 'admin' %}
          <!-- ì¼ë°˜ ìœ ì €: ì´ë©”ì¼ ì…ë ¥ -->
          <div class="mb-3 text-start">
            <label class="form-label text-secondary small mb-1">ì´ë©”ì¼</label>
            <input type="email" name="email"
                   class="form-control bg-dark text-white border-secondary py-2"
                   placeholder="email@example.com" required autofocus>
          </div>
        {% endif %}

        <!-- ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ (ê´€ë¦¬ì/ìœ ì € ê³µí†µ) -->
        <div class="mb-3 text-start">
          <label class="form-label text-secondary small mb-1">
            {% if mode == 'admin' %}
              ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸
            {% else %}
              ë¹„ë°€ë²ˆí˜¸
            {% endif %}
          </label>
          <input type="password" name="password"
                 class="form-control bg-dark text-white border-secondary py-2"
                 placeholder="ë¹„ë°€ë²ˆí˜¸ ì…ë ¥"
                 required {% if mode == 'admin' %}autofocus{% endif %}>
        </div>

        <button type="submit" class="btn btn-primary w-100 py-2 fw-bold">
          {% if mode == 'admin' %}
            ê´€ë¦¬ì ë¡œê·¸ì¸
          {% elif mode == 'register' %}
            íšŒì›ê°€ì…
          {% else %}
            ë¡œê·¸ì¸
          {% endif %}
        </button>
      </form>
    </div>

    {# ===== ì¹´ë“œ ë°”ê¹¥ í•˜ë‹¨ ë§í¬ (íšŒì›ê°€ì… í™”ë©´ì—ì„œëŠ” ìˆ¨ê¹€) ===== #}
    <div class="text-center mt-4 small mb-4">
      {% if mode != 'register' %}
        <a href="{{ url_for('index') }}" class="text-secondary text-decoration-none d-block mb-2">
          â† ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°
        </a>
      {% endif %}

      {% if mode == 'login' %}
        <a href="{{ url_for('register') }}" class="text-primary text-decoration-none me-2">
          íšŒì›ê°€ì… í•˜ê¸°
        </a>
        <a href "{{ url_for('admin_login') }}" class="text-secondary text-decoration-none">
          ê´€ë¦¬ì ë¡œê·¸ì¸
        </a>
      {% elif mode == 'register' %}
        {# íšŒì›ê°€ì… í™”ë©´ì—ì„œëŠ” ì—¬ê¸° ë§í¬ ìˆ¨ê¹€ (í’‹í„°ì— ì´ë¯¸ ìˆìŒ) #}
      {% elif mode == 'admin' %}
        <a href="{{ url_for('login') }}" class="text-secondary text-decoration-none">
          ì¼ë°˜ ì‚¬ìš©ì ë¡œê·¸ì¸
        </a>
      {% endif %}
    </div>

  </div>
</div>

{% endblock %}
