{% extends "base.html" %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-8">
        <!-- ì¹´ë“œ: ì…ë ¥ í¼ -->
        <div class="card card-dark border-0 mb-4">
            <div class="card-body p-5">
                <h2 class="fw-bold mb-2 text-white">ğŸ“ í•™ê³¼ ê¸°ë°˜ ì§ë¬´ íƒìƒ‰</h2>
                <p class="text-secondary mb-4">
                    ìš°ë¦¬ ëŒ€í•™ ì „ê³µìœ¼ë¡œ ì–´ë–¤ ê¸°ì—…, ì–´ë–¤ ì§ë¬´ì— ê°ˆ ìˆ˜ ìˆì„ê¹Œìš”?<br>
                    AIê°€ ì „ê³µ ì—­ëŸ‰ê³¼ ê¸°ì—…ì˜ í•„ìš” ì—­ëŸ‰ì„ ë§¤ì¹­í•´ ë“œë¦½ë‹ˆë‹¤.
                </p>

                <form method="POST" action="{{ url_for('career') }}">
                    <!-- 1. í•™ê³¼ ì„ íƒ -->
                    <div class="mb-4">
                        <label class="form-label text-info fw-bold">1. ë³¸ì¸ì˜ ì „ê³µì„ ì„ íƒí•˜ì„¸ìš”</label>
                        <select class="form-select bg-dark text-white border-secondary p-3" name="major" required>
                            <option value="">í•™ê³¼ ëª©ë¡ì—ì„œ ì„ íƒ...</option>
                            {% for category, major_list in majors.items() %}
                                <optgroup label="{{ category }}">
                                    {% for major in major_list %}
                                        <option value="{{ major }}" {% if sel_major == major %}selected{% endif %}>
                                            {{ major }}
                                        </option>
                                    {% endfor %}
                                </optgroup>
                            {% endfor %}
                        </select>
                    </div>

                    <!-- 2. ê¸°ì—… ì…ë ¥ (ìë™ì™„ì„± ì ìš©) -->
                    <div class="mb-4">
                        <label class="form-label text-success fw-bold">2. í¬ë§í•˜ëŠ” ê¸°ì—…ëª…ì„ ì…ë ¥í•˜ì„¸ìš”</label>
                        
                        <!-- â–¼â–¼â–¼ [ìˆ˜ì •ë¨] ë¦¬ìŠ¤íŠ¸ ì—°ê²° ë° placeholder ë³€ê²½ â–¼â–¼â–¼ -->
                        <input type="text" name="company" class="form-control bg-dark text-white border-secondary p-3" 
                               placeholder="ê¸°ì—…ëª…ì„ ì…ë ¥í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì„ íƒí•˜ì„¸ìš”" 
                               value="{{ sel_company if sel_company else '' }}" 
                               list="companyOptions" autocomplete="off" required>
                        
                        <!-- ìë™ì™„ì„± ëª©ë¡ ë°ì´í„° -->
                        <datalist id="companyOptions">
                            {% for company in company_options %}
                                <option value="{{ company }}">
                            {% endfor %}
                        </datalist>
                        <!-- â–²â–²â–² -->
                    </div>

                    <div class="d-grid">
                        <button type="submit" class="btn btn-ai btn-lg shadow-lg">
                            ğŸš€ ì§ë¬´ ë¶„ì„ ì‹œì‘í•˜ê¸°
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- ì¹´ë“œ: ê²°ê³¼ í‘œì‹œ (AI ë¶„ì„ ì™„ë£Œ ì‹œì—ë§Œ í‘œì‹œë¨) -->
        {% if result %}
        <div class="card card-dark border-0 animate-slide-up">
            <div class="card-header border-secondary bg-transparent py-3">
                <h5 class="mb-0 text-white">
                    <span class="text-info fw-bold">{{ sel_major }}</span> ì „ê³µ 
                    <i class="bi bi-arrow-right mx-2">â†’</i> 
                    <span class="text-success fw-bold">{{ sel_company }}</span> ë§¤ì¹­ ê²°ê³¼
                </h5>
            </div>
            <div class="card-body p-4">
                <!-- AIê°€ ì¨ì¤€ ë§ˆí¬ë‹¤ìš´ ë‚´ìš©ì´ ì—¬ê¸° ë“¤ì–´ê° -->
                <div class="markdown-body">
                    {{ result | safe }}
                </div>
                
                <div class="mt-4 text-end">
                    <a href="{{ url_for('career') }}" class="btn btn-outline-secondary btn-sm">ë‹¤ë¥¸ ê¸°ì—… ê²€ìƒ‰í•˜ê¸°</a>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}