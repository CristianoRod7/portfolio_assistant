{% extends "base.html" %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-8">
        <div class="card card-dark border-0 mb-4">
            <div class="card-body p-5">
                <h2 class="fw-bold mb-2 text-white">🎓 학과 기반 직무 탐색</h2>
                <p class="text-secondary mb-4">
                    우리 대학 전공으로 어떤 기업, 어떤 직무에 갈 수 있을까요?<br>
                    AI가 전공 역량과 기업의 필요 역량을 매칭해 드립니다.
                </p>

                <form method="POST" action="{{ url_for('career') }}">
                    <div class="mb-4">
                        <label class="form-label text-info fw-bold">1. 본인의 전공을 선택하세요</label>
                        <select class="form-select bg-dark text-white border-secondary p-3" name="major" required>
                            <option value="">학과 목록에서 선택...</option>
                            {% for category, major_list in majors.items() %}
                                <optgroup label="{{ category }}">
                                    {% for major in major_list %}
                                        <option value="{{ major }}" {% if sel_major == major %}selected{% endif %}>
                                            {{ major }}
                                        </option>
                                    {% endfor %}
                                </optgroup>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="mb-4">
                        <label class="form-label text-success fw-bold">2. 희망하는 기업명을 입력하세요</label>
                        <input type="text" name="company" class="form-control bg-dark text-white border-secondary p-3" 
                               placeholder="예: 삼성전자, 충남도청, 현대자동차, 성심당 등" 
                               value="{{ sel_company if sel_company else '' }}" required>
                    </div>

                    <div class="d-grid">
                        <button type="submit" class="btn btn-ai btn-lg shadow-lg">
                            🚀 직무 분석 시작하기
                        </button>
                    </div>
                </form>
            </div>
        </div>

        {% if result %}
        <div class="card card-dark border-0 animate-slide-up">
            <div class="card-header border-secondary bg-transparent py-3">
                <h5 class="mb-0 text-white">
                    <span class="text-info fw-bold">{{ sel_major }}</span> 전공 
                    <i class="bi bi-arrow-right mx-2">→</i> 
                    <span class="text-success fw-bold">{{ sel_company }}</span> 매칭 결과
                </h5>
            </div>
            <div class="card-body p-4">
                <div class="markdown-body">
                    {{ result | safe }}
                </div>
                
                <div class="mt-4 text-end">
                    <a href="{{ url_for('career') }}" class="btn btn-outline-secondary btn-sm">다른 기업 검색하기</a>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}