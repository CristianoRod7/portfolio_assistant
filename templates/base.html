<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>AI Portfolio Assistant</title>

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              "ai-dark": "#0a0014",
              "ai-purple": "#7b3fe4",
              "ai-purple-light": "#b085ff",
              "ai-blue": "#5cd4ff",
              "ai-gradient-1": "#1f0137",
              "ai-gradient-2": "#7b3fe4",
            },
          },
        },
      };
    </script>

    <style>
      /* 인쇄용 */
      @media print {
        .no-print {
          display: none !important;
        }
      }

      /* 글꼴 */
      body {
        font-family: 'Pretendard', sans-serif;
      }
       .loading-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.55);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 2000;
  }
  .loading-overlay.show {
    display: flex;
  }
  .loading-box {
    background: #1b1030;
    padding: 24px 32px;
    border-radius: 16px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
    text-align: center;
    color: #fff;
    min-width: 260px;
  }
  .spinner {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    border: 4px solid rgba(255, 255, 255, 0.25);
    border-top-color: #ffcc4d;
    animation: spin 0.8s linear infinite;
    margin: 0 auto 12px;
  }
  .loading-text {
    font-size: 0.95rem;
  }
  @keyframes spin {
    to { transform: rotate(360deg); }
  }
    </style>
</head>

<body class="bg-ai-dark text-gray-100 min-h-screen">
<body>
  <!-- 로딩 오버레이 -->
  <div id="loadingOverlay" class="loading-overlay">
    <div class="loading-box">
      <div class="spinner"></div>
      <div class="loading-text">AI가 분석 중입니다... 잠시만 기다려 주세요.</div>
    </div>
  </div>

  <!-- 기존 내용들... -->
  {% block content %}{% endblock %}

    <!-- NAVBAR -->
    <nav class="no-print w-full bg-gradient-to-r from-ai-gradient-1 to-ai-gradient-2 shadow-lg">
        <div class="max-w-6xl mx-auto flex items-center justify-between px-6 py-4">

            <a href="{{ url_for('index') }}" class="text-xl font-bold text-white tracking-wide">
                <span class="text-ai-blue">AI</span> Portfolio
            </a>

            <div class="flex space-x-4">
                <a href="{{ url_for('add') }}" class="px-4 py-2 bg-ai-purple rounded-lg hover:bg-ai-purple-light">
                    활동 추가
                </a>

                <a href="{{ url_for('analyze') }}" class="px-4 py-2 bg-ai-blue rounded-lg hover:bg-ai-purple-light">
                    전체 분석
                </a>

                <a href="{{ url_for('company_analyze') }}" class="px-4 py-2 bg-indigo-500 rounded-lg hover:bg-ai-purple-light">
                    회사 맞춤 분석
                </a>

                <a href="{{ url_for('generate_resume') }}" class="px-4 py-2 bg-green-600 rounded-lg hover:bg-green-400">
                    이력서 생성
                </a>

                <a href="{{ url_for('generate_cover_letter') }}" class="px-4 py-2 bg-yellow-600 rounded-lg hover:bg-yellow-500">
                    자기소개서 생성
                </a>
            </div>
        </div>
    </nav>

    <!-- CONTENT -->
    <div class="max-w-6xl mx-auto px-6 py-6">
        {% block content %}
        {% endblock %}
    </div>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const overlay = document.getElementById("loadingOverlay");

    // data-ai-form="true" 붙은 폼에만 로딩 적용
    const aiForms = document.querySelectorAll('form[data-ai-form="true"]');

    aiForms.forEach(function (form) {
      form.addEventListener("submit", function () {
        const btn = form.querySelector("[data-ai-submit]");
        if (btn) {
          // 버튼 비활성 + 텍스트 변경
          btn.disabled = true;
          if (!btn.dataset.originalText) {
            btn.dataset.originalText = btn.innerText;
          }
          btn.innerText = "AI가 분석 중입니다...";
        }
        if (overlay) {
          overlay.classList.add("show");
        }
      });
    });
  });
</script>
</body>

</body>
</html>
