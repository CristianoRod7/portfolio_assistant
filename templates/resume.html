{% extends "base.html" %}
{% block content %}

<h2 class="h4 mb-4 fw-bold">📄 이력서 핵심 경력 생성</h2>

<div class="card card-dark p-4 mb-4">
  <form method="post" class="row g-3 align-items-end">
    <div class="col-md-5">
      <label class="form-label text-secondary small">타겟 회사 (선택)</label>
      <select name="company" class="form-select bg-dark text-white border-secondary">
        <option value="">일반 (특정 기업 지정 안 함)</option>
        {% for c in company_options %}
          <option value="{{ c }}" {% if target_company == c %}selected{% endif %}>{{ c }}</option>
        {% endfor %}
      </select>
    </div>
    
    <!-- 직무 선택 (수정됨: list 속성 추가) -->
    <div class="col-md-5">
      <label class="form-label text-secondary small">타겟 직무</label>
      <input type="text" name="role" list="roleOptions" 
             class="form-control bg-dark text-white border-secondary"
             placeholder="직무를 선택하거나 입력하세요" 
             value="{{ target_role or '' }}" autocomplete="off">
             
      <!-- 직무 추천 목록 (Datalist) -->
      <datalist id="roleOptions">
        <option value="백엔드 개발자 (Backend Developer)">
        <option value="프론트엔드 개발자 (Frontend Developer)">
        <option value="풀스택 개발자 (Full Stack Developer)">
        <option value="모바일 앱 개발자 (Android/iOS)">
        <option value="데이터 엔지니어 (Data Engineer)">
        <option value="데이터 분석가 (Data Analyst)">
        <option value="인공지능/머신러닝 엔지니어 (AI/ML)">
        <option value="DevOps/SRE 엔지니어">
        <option value="보안 엔지니어 (Security)">
        <option value="임베디드 소프트웨어 개발자">
        <option value="SW 개발 / 전산직">
        <option value="ICT / 정보보호">
        <option value="IT 서비스 기획 (PM/PO)">
        <option value="R&D (연구개발)">
        <option value="시스템 엔지니어 (System Engineer)">
      </datalist>
    </div>

    <div class="col-md-2">
      <button type="submit" class="btn btn-ai w-100">생성</button>
    </div>
  </form>
</div>

{% if resume_text %}
<div class="d-flex justify-content-between align-items-center mb-2">
  <span class="small text-secondary">💡 이 내용을 이력서 상단 '핵심 역량' 란에 복사해서 쓰세요.</span>
  <button type="button" class="btn btn-sm btn-outline-light" onclick="window.print()">PDF 저장</button>
</div>

<div class="card card-dark p-4 border-light border-opacity-25 mb-3">
  <div class="markdown-body">
    {{ resume_text | safe }}
  </div>
</div>

<div class="text-end text-secondary small">
  ⚠️ AI가 생성한 문구입니다. <strong>반드시 사실 여부를 확인하고 수정</strong>하여 사용하세요.
</div>
{% endif %}

{% endblock %}